"use strict";
var fs = require("fs");
var os_1 = require("os");
var path = require("path");
var GitIgnore = (function () {
    function GitIgnore() {
        this.ignorePath = ".gitignore";
        // create configs.json if exists
        try {
            fs.statSync(this.ignorePath);
        }
        catch (e) {
            fs.writeFileSync(this.ignorePath, "", { encoding: "utf-8" });
        }
    }
    GitIgnore.prototype.merge = function (addIgnores) {
        // read .gitignore
        var ignores = fs.readFileSync(this.ignorePath, "utf-8").split(/\r?\n/);
        // merge
        addIgnores.forEach(function (i) {
            var filePath = path.normalize(i).split(path.sep).join("/");
            if (ignores.filter(function (ignore) { return ignore === filePath; }).length === 0) {
                ignores.push(filePath);
            }
        });
        // write .gitignore
        fs.writeFileSync(this.ignorePath, ignores.join(os_1.EOL), { encoding: "utf-8" });
    };
    return GitIgnore;
}());
exports.GitIgnore = GitIgnore;
//# sourceMappingURL=gitignore.js.map